#!/usr/bin/bash

#generated by gen-scripts.r defined by definitions.r

usage()
{
cat <<EOF

usage: $0 options

Creates an invoice head.

options:
-n Docnum (required) 
-c Contact ID (required) 
-d Date sent (required) 
-p Payment deadline (required) 
-s Payment deadline (required) 
-f Response format: json, csv, html, xml (optional) 

EOF

}

NVAL="11-0001"
CVAL=
DVAL=
PVAL=
SVAL=
FVAL="json"


while getopts hn:c:d:p:s:f: OPTION
do
	case $OPTION in
	h)
	    usage
	    exit 1
	    ;;
		n)
			NVAL=$OPTARG
			;;
		c)
			CVAL=$OPTARG
			;;
		d)
			DVAL=$OPTARG
			;;
		p)
			PVAL=$OPTARG
			;;
		s)
			SVAL=$OPTARG
			;;
		f)
			FVAL=$OPTARG
			;;
	?)
	    usage
	    exit
	    ;;
    esac
done

if [[ -z $NVAL ]] || [[ -z $CVAL ]] || [[ -z $DVAL ]] || [[ -z $PVAL ]] || [[ -z $SVAL ]]
then

     usage
     cat <<EOF 

 - One or more of required params are missing.
EOF
     exit 1
fi


curl -k \
     -u `cat .invfpwd`:x \
     -d "title=${NVAL}&id_partner=${CVAL}&date_sent=${DVAL}&date_to_pay=${PVAL}&date_served=${SVAL}" \
     "https://www.cebelca.biz/API?_r=invoice-sent&_m=insert-into&_f=${FVAL}"